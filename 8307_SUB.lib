* C:\Users\josel\hobby\dev_instrumentation\EMI_detector\8307_SUB.asc
.subckt 8307_SUB 1_INM 2_CMN 3_OFS 4_OUT 5_INT 6_ENB 7_VPS 8_INP
R1 N007 8_INP 500
R2 N007 1_INM 500
R3 1_INM 2_CMN 100Meg
R4 8_INP 2_CMN 100Meg
V1 N007 2_CMN 3.2578
C1 8_INP 1_INM 1.4p
B1 N017 2_CMN V=IF(V(6_ENB)-V(2_CMN)> 2.3,V(8_INP)-V(1_INM),0)
B22 N009 N017 V=0
V2 V12 N009 0
BV3 N008 2_CMN V=998.692u*(TEMP+287.775)
+*TANH((V(V12,2_CMN)-V(2_CMN))/(172.5u*(TEMP+274.15)))
R5 V14 N008 1K
C2 V14 2_CMN 0.3p
BV4 N002 2_CMN V=904.1875u*(TEMP+287.334488)
+*TANH(V(V14,2_cmn)/(172.5u*(TEMP+274.15)))
BV5 N003 2_CMN V=903.975u*(TEMP+287.7372)
+*TANH(V(V16,2_cmn)/(172.5u*(TEMP+274.15)))
BV6 N004 2_CMN V=801.8u*(TEMP+301.1642)
+*TANH(V(V18,2_cmn)/(172.5u*(TEMP+274.15)))
BV7 N005 2_CMN V=896.75u*(TEMP+301.1642)
+*TANH(V(V20,2_cmn)/(172.5u*(TEMP+274.15)))
BV8 N006 2_CMN V=977.5u*(TEMP+273.2804)
+*TANH(V(V22,2_cmn)/(172.5u*(TEMP+274.15)))
R6 V16 N002 1K
R7 V18 N003 1K
R8 V20 N004 1K
R9 V22 N005 1K
R10 V24 N006 1K
C3 V16 2_CMN .085p
C4 V18 2_CMN .085p
C5 V20 2_CMN .085p
C6 V22 2_CMN .085p
C7 V24 2_CMN .085p
B2 2_CMN N010 I=(7.76n*TEMP + 29.8147u)
+*(COSH(V(V14,2_CMN)/(172.5u*(TEMP+274.15)))
+/(1+COSH(V(V14,2_CMN)/(172.5u*(TEMP+274.15)))))
B3 2_CMN N019 I=-(7.76n*TEMP + 29.8147u)
+/(1+COSH(V(V14,2_CMN)/(172.5u*(TEMP+274.15))))
B4 2_CMN N011 I=(.9885n*TEMP + 29.70868u)
+*(COSH(V(V16,2_CMN)/(172.5u*(TEMP+274.15)))
+/(1+COSH(V(V16,2_CMN)/(172.5u*(TEMP+274.15)))))
B5 2_CMN N020 I=-(.9885n*TEMP + 29.70868u)
+/(1+COSH(V(V16,2_CMN)/(172.5u*(TEMP+274.15))))
B6 2_CMN N012 I=(.9885n*TEMP + 29.70868u)
+*(COSH(V(V18,2_CMN)/(172.5u*(TEMP+274.15)))
+/(1+COSH(V(V18,2_CMN)/(172.5u*(TEMP+274.15)))))
B7 2_CMN N021 I=-(.9885n*TEMP + 29.70868u)
+/(1+COSH(V(V18,2_CMN)/(172.5u*(TEMP+274.15))))
B8 2_CMN N013 I=(3.954n*TEMP + 29.6286u)
+*(COSH(V(V20,2_CMN)/(172.5u*(TEMP+274.15)))
+/(1+COSH(V(V20,2_CMN)/(172.5u*(TEMP+274.15)))))
B9 2_CMN N022 I=-(3.954n*TEMP + 29.6286u)
+/(1+COSH(V(V20)/(172.5u*(TEMP+274.15))))
B10 2_CMN N014 I=(7.908n*TEMP + 29.5219u)
+*(COSH(V(V22,2_CMN)/(172.5u*(TEMP+274.15)))
+/(1+COSH(V(V22,2_CMN)/(172.5u*(TEMP+274.15)))))
B11 2_CMN N023 I=-(7.908n*TEMP + 29.5219u)
+/(1+COSH(V(V22,2_CMN)/(172.5u*(TEMP+274.15))))
B12 2_CMN N015 I=(37.46n*TEMP + 57.0747u)
+*(COSH(V(V24,2_CMN)/(172.5u*(TEMP+274.15)))
+/(1+COSH(V(V24,2_CMN)/(172.5u*(TEMP+274.15)))))
B13 2_CMN N024 I=-(37.46n*TEMP + 57.0747u)
+/(1+COSH(V(V24,2_CMN)/(172.5u*(TEMP+274.15))))
B14 2_CMN N016 I=(7.132n*TEMP + 27.5784u)
+*(COSH(1.2*V(V12,2_CMN)/(172.5u*(TEMP + 274.15)))
+/(1+COSH(1.2*V(V12,2_CMN)/(172.5u*(TEMP + 274.15)))))
B15 2_CMN N025 I=-(7.132n*TEMP + 27.5784u)
+/(1+COSH(1.2*V(V12,2_CMN)/(172.5u*(TEMP + 274.15))))
B16 2_CMN N016 I=(4.7n*TEMP + 26.8338u)
+*(COSH(.25*V(V12,2_CMN)/(172.5u*(TEMP + 274.15)))
+/(1+COSH(.25*V(V12,2_CMN)/(172.5u*(TEMP + 274.15)))))
B17 2_CMN N025 I=-(4.7n*TEMP + 26.8338u)
+/(1+COSH(.25*V(V12,2_CMN)/(172.5u*(TEMP + 274.15))))
B18 2_CMN N016 I=(9.564n*TEMP + 31.8017u)
+*(COSH(.045*V(V12,2_CMN)/(172.5u*(TEMP + 274.15)))
+/(1+COSH(.045*V(V12,2_CMN)/(172.5u*(TEMP + 274.15)))))
B19 2_CMN N025 I=-(9.564n*TEMP + 31.8017u)
+/(1+COSH(.045*V(V12,2_CMN)/(172.5u*(TEMP + 274.15))))
C8 N010 2_CMN |CD|
C9 N019 2_CMN |CD|
C10 N011 2_CMN |CD|
C11 N020 2_CMN |CD|
C12 N012 2_CMN |CD|
C13 N021 2_CMN |CD|
C14 N013 2_CMN |CD|
C15 N022 2_CMN |CD|
C16 N014 2_CMN |CD|
C17 N023 2_CMN |CD|
C18 N015 2_CMN |CD|
C19 N024 2_CMN |CD|
R11 N010 N018 1K
R12 N019 N018 1K
R13 N011 N018 1K
R14 N020 N018 1K
R15 N012 N018 1K
R16 N021 N018 1K
R17 N013 N018 1K
R18 N022 N018 1K
R19 N014 N018 1K
R20 N023 N018 1K
R21 N015 N018 1K
R22 N024 N018 1K
C20 N016 2_CMN 0.4p
C21 N025 2_CMN 0.4p
R23 N016 N018 800
R24 N025 N018 800
B20 2_CMN N018 I=-50u
R25 2_CMN N018 3075
B21 7_VPS 2_CMN I=IF(V(6_ENB) >= 2.3, 8m, 0.05u)
R26 2_CMN 6_ENB 100Meg
R27 N001 5_INT 60K
R28 2_CMN 3_OFS 100Meg
C23 2_CMN 4_OUT 2.5p
B25 4_OUT 7_VPS I=if(I(R25)>-32u,-32u,I(R25)-I(R27))
R29 4_OUT 2_CMN 12.5k
V6 7_VPS N001 400m
I1 N001 2_CMN 60u
.text CD="1.5p"
.backanno
.end
